<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Angular-vumeter by matteovinci</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Angular-vumeter</h1>
      <h2 class="project-tagline">A customizable AngularJS directive representing a VU meter</h2>
      <a href="https://github.com/matteovinci/angular-vumeter" class="btn">View on GitHub</a>
      <a href="https://github.com/matteovinci/angular-vumeter/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/matteovinci/angular-vumeter/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://badge.fury.io/js/angular-vumeter"><img src="https://badge.fury.io/js/angular-vumeter.svg" alt="npm version"></a>
<a href="https://badge.fury.io/bo/angular-vumeter"><img src="https://badge.fury.io/bo/angular-vumeter.svg" alt="Bower version"></a>
<a href="https://travis-ci.org/matteovinci/angular-vumeter"><img src="https://travis-ci.org/matteovinci/angular-vumeter.svg?branch=master" alt="Build Status"></a></p>

<p><img src="https://matteovinci.github.io/angular-vumeter/demo/assets/vu-meter-demo-preview.png" alt="VU meter demo preview"></p>

<h3>
<a id="quick-links" class="anchor" href="#quick-links" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick links</h3>

<ul>
<li><a href="#demo">Demo</a></li>
<li>
<a href="#installation">Getting started</a>

<ul>
<li><a href="#install-with-npm">NPM</a></li>
<li><a href="#install-with-bower">Bower</a></li>
<li><a href="#adding-dependency-to-your-project">Adding dependency to your project</a></li>
<li><a href="#vu-meter-using-the-microphone-input">VU meter using the microphone input</a></li>
<li><a href="#vu-meter-using-an-audio-source">VU meter using an audio source</a></li>
<li><a href="#custom-templates">Custom templates</a></li>
</ul>
</li>
<li>
<a href="#support">Support</a>

<ul>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#supported-browsers">Supported browsers</a></li>
<li><a href="#found-a-bug">Found a bug?</a></li>
</ul>
</li>
</ul>

<h1>
<a id="demo" class="anchor" href="#demo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demo</h1>

<p>Do you want to see directives in action? Check out the <a href="https://matteovinci.github.io/angular-vumeter/demo/app/">demo page</a>!</p>

<h1>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting started</h1>

<h2>
<a id="install-with-npm" class="anchor" href="#install-with-npm" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install with NPM</h2>

<div class="highlight highlight-source-shell"><pre>$ npm install angular-vumeter</pre></div>

<p>This will install angular-vumeter NPM package.</p>

<h2>
<a id="install-with-bower" class="anchor" href="#install-with-bower" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install with Bower</h2>

<div class="highlight highlight-source-shell"><pre>$ bower install angular-vumeter</pre></div>

<h2>
<a id="adding-dependency-to-your-project" class="anchor" href="#adding-dependency-to-your-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Adding dependency to your project</h2>

<p>When you are done downloading all the dependencies and project files the only remaining part is to add dependencies on the <code>angular-vumeter</code> module:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>myModule<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>angular-vumeter<span class="pl-pds">'</span></span>]);</pre></div>

<h2>
<a id="including-js-and-css" class="anchor" href="#including-js-and-css" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Including js and css</h2>

<div class="highlight highlight-source-js"><pre>
</pre></div>

<h2>
<a id="vu-meter-using-the-microphone-input" class="anchor" href="#vu-meter-using-the-microphone-input" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>VU meter using the microphone input</h2>

<p>By default the vumeter will be active as soon as the page is loaded and it will use microphone as default input.
You can activate/deactivate VU meter defining the <code>isActive</code> attribute:</p>

<div class="highlight highlight-source-js"><pre></pre></div>

<h2>
<a id="vu-meter-using-an-audio-source" class="anchor" href="#vu-meter-using-an-audio-source" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>VU meter using an audio source</h2>

<div class="highlight highlight-source-js"><pre>


    Your browser does not support the audio element.
</pre></div>

<h2>
<a id="custom-templates" class="anchor" href="#custom-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom templates</h2>

<p>By default the directive will show an svg template. This is inspired to the old analogic VU meter by TEAC corporation.
You can download the original illustrator file of the svg template and customize it (vumeter.ai)"&gt;<a href="https://matteovinci.github.io/angular-vumeter/demo/assets/vumeter.ai%22%3Evumeter.ai">https://matteovinci.github.io/angular-vumeter/demo/assets/vumeter.ai"&gt;vumeter.ai</a>)</p>

<p>Using <code>vuMeterConfig</code> provider you can register a new template with you own logic:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">vuMeterConfig</span>.<span class="pl-en">registerTemplate</span>(<span class="pl-s"><span class="pl-pds">'</span>myCustomTemplate<span class="pl-pds">'</span></span>, {
    path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>path/to/html/or/svg/template<span class="pl-pds">'</span></span>,
    <span class="pl-c">/**</span>
<span class="pl-c">    * Optional: This method is run only once. Function to find</span>
<span class="pl-c">    * elements before execution of the onDraw function.</span>
<span class="pl-c">    * It can be useful to find elements of the template that</span>
<span class="pl-c">    * need to be accessed multiple times during onDraw</span>
<span class="pl-c">    */</span>
    <span class="pl-en">getTemplateElements</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">$element</span>) {
        <span class="pl-k">return</span> [];
    },
    <span class="pl-c">/**</span>
<span class="pl-c">    * Required: This method is run every 1024 audio samples.</span>
<span class="pl-c">    * Any manipolation of DOM to show audio visualization should be included here</span>
<span class="pl-c">    */</span>
    <span class="pl-en">onDraw</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">$element</span>, <span class="pl-smi">volume</span>, <span class="pl-smi">templateElements</span>) {}
}</pre></div>

<p>This is the implementation for the default template:</p>

<div class="highlight highlight-source-js"><pre>{
    path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>angular-vumeter/template/angular-vumeter.svg<span class="pl-pds">'</span></span>,
    <span class="pl-en">getTemplateElements</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">$element</span>) {
        <span class="pl-c">// let's find motion elements in svg knowing their types and ids</span>
        <span class="pl-k">function</span> <span class="pl-en">findElementInSVG</span>(<span class="pl-smi">type</span>, <span class="pl-smi">id</span>) {
            <span class="pl-k">var</span> elements <span class="pl-k">=</span> <span class="pl-smi">$element</span>.<span class="pl-c1">find</span>(type);
            <span class="pl-k">for</span> (<span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">elements</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {
                <span class="pl-k">var</span> el <span class="pl-k">=</span> elements[i];
                <span class="pl-k">if</span> (<span class="pl-smi">el</span>.<span class="pl-c1">id</span> <span class="pl-k">===</span> id) {
                    <span class="pl-k">return</span> el;
                }
            }
        }
        <span class="pl-c">// trigger is a g element</span>
        <span class="pl-k">var</span> trigger <span class="pl-k">=</span> <span class="pl-en">findElementInSVG</span>(<span class="pl-s"><span class="pl-pds">'</span>g<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>trigger<span class="pl-pds">'</span></span>);
        <span class="pl-c">// peak is a ellipse element</span>
        <span class="pl-k">var</span> peak <span class="pl-k">=</span> <span class="pl-en">findElementInSVG</span>(<span class="pl-s"><span class="pl-pds">'</span>ellipse<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>peak<span class="pl-pds">'</span></span>);
        <span class="pl-k">return</span> [<span class="pl-smi">angular</span>.<span class="pl-en">element</span>(trigger), <span class="pl-smi">angular</span>.<span class="pl-en">element</span>(peak)];
    },
    <span class="pl-en">onDraw</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">$element</span>, <span class="pl-smi">volume</span>, <span class="pl-smi">templateElements</span>) {
        <span class="pl-c">// this is relative to the original system of coordinates of the template</span>
        <span class="pl-k">var</span> rotationPivot <span class="pl-k">=</span> {
            x<span class="pl-k">:</span> <span class="pl-c1">292</span>,
            y<span class="pl-k">:</span> <span class="pl-c1">331</span>
        };

        <span class="pl-c">// Let's get template elements calculated only once (not on every onDraw iteration)</span>
        <span class="pl-k">var</span> trigger <span class="pl-k">=</span> templateElements[<span class="pl-c1">0</span>];
        <span class="pl-k">var</span> led <span class="pl-k">=</span> templateElements[<span class="pl-c1">1</span>];

        <span class="pl-k">var</span> minAngle <span class="pl-k">=</span> <span class="pl-c1">65</span>, maxAngle <span class="pl-k">=</span> <span class="pl-c1">100</span>;
        <span class="pl-c">// Transform volume in a visual data</span>
        <span class="pl-k">var</span> deg <span class="pl-k">=</span> <span class="pl-c1">Math</span>.<span class="pl-c1">min</span>((minAngle <span class="pl-k">*</span> volume) <span class="pl-k">/</span> <span class="pl-c1">100</span>, maxAngle);
        <span class="pl-c">// Trigger rotation</span>
        <span class="pl-smi">trigger</span>.<span class="pl-en">attr</span>(<span class="pl-s"><span class="pl-pds">'</span>transform<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rotate(<span class="pl-pds">'</span></span> <span class="pl-k">+</span> deg <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-smi">rotationPivot</span>.<span class="pl-c1">x</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-smi">rotationPivot</span>.<span class="pl-c1">y</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>)<span class="pl-pds">'</span></span>);
        <span class="pl-c">// Led blinking</span>
        <span class="pl-smi">led</span>.<span class="pl-en">attr</span>(<span class="pl-s"><span class="pl-pds">'</span>fill<span class="pl-pds">'</span></span>, volume <span class="pl-k">&gt;</span> <span class="pl-c1">100</span> <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">'</span>#ea2b2c<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>#992B2C<span class="pl-pds">'</span></span>);
    }
}</pre></div>

<p>You can create simpler or more complex audio visualization using html or svg templates</p>

<h1>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support</h1>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation</h2>

<p>Check out angular-vumeter documentation <a href="https://matteovinci.github.io/angular-vumeter/docs/build/">here</a></p>

<h2>
<a id="supported-browsers" class="anchor" href="#supported-browsers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Supported browsers</h2>

<p>Directives from this repository are automatically tested with the following browsers:</p>

<ul>
<li>Chrome</li>
<li>Firefox</li>
<li>Edge</li>
<li>Opera</li>
</ul>

<p>angular-vumeter uses getUserMediaStream API (check its global support <a href="http://caniuse.com/#feat=stream">here</a>)</p>

<p>Modern mobile browsers should work without problems.</p>

<h2>
<a id="found-a-bug" class="anchor" href="#found-a-bug" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Found a bug?</h2>

<p>Please submit your issue <a href="https://github.com/matteovinci/angular-vumeter/issues/new">here</a>.</p>

<hr>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/matteovinci/angular-vumeter">Angular-vumeter</a> is maintained by <a href="https://github.com/matteovinci">matteovinci</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
